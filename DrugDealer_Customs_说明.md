## 实验二：Drug dealer and customs official 归结证明尝试说明

本说明文档对应 `resolver.py` 中“问题二”的尝试性形式化与归结证明。该问题较难，以下编码在语义上采取了合理且常见的一种解读，若与你的课堂版本稍有差异，可据此微调。

### 一、问题复述（按常见解读）

1) 海关官员搜查所有进入国家且不是VIP的人。
2) 有一些毒贩进入了国家，并且他们只被毒贩搜查。
3) 没有毒贩是VIP。
4) 有些海关官员是毒贩。（注：原题给出的第四条有时作为需要推出的结论，也有作为已知前提的课堂变体。本实现以“(1)(2)(3) 推出存在既是海关官员又是毒贩”为目标。）

需证：从 (1)(2)(3) 推出 ∃y (CO(y) ∧ DD(y))。

### 二、谓词与常元/函数约定

- EN(x): x 进入了国家（entered the country）
- VIP(x): x 是 VIP
- CO(y): y 是海关官员（customs official）
- S(y,x): y 搜查了 x（searched）
- DD(x): x 是毒贩（drug dealer）
- 常元 a: 见证“存在某个毒贩进入国家并具有只被毒贩搜查的性质”
- 函数 f(x): 对每个被搜查目标 x，Skolem 函数产生一个执行搜查的官员 f(x)

### 三、形式化与CNF化（尝试编码）

1) ∀x (EN(x) ∧ ¬VIP(x) → ∃y (CO(y) ∧ S(y,x)))
   - Skolem 化 y := f(x)
   - CNF 子句：
     - ¬EN(x) ∨ VIP(x) ∨ CO(f(x))
     - ¬EN(x) ∨ VIP(x) ∨ S(f(x), x)

2) ∃x (DD(x) ∧ EN(x) ∧ ∀y (S(y,x) → DD(y)))
   - Skolem 常元 a
   - CNF 子句：
     - DD(a)
     - EN(a)
     - ¬S(y,a) ∨ DD(y)

3) ∀x (DD(x) → ¬VIP(x))
   - CNF 子句：
     - ¬DD(x) ∨ ¬VIP(x)

否定结论（反证）：
   - ∀y (CO(y) → ¬DD(y))  →  ¬CO(y) ∨ ¬DD(y)

以上在 `resolver.py` 的 `drug_dealer_customs_cnf()` 中实现。

### 四、证明思路（反证归结）

将 (1)(2)(3) 的 CNF 与否定结论 CNF 一并加入子句集，执行二元归结。若导出空子句（⊥），则“否定结论”为假，原结论成立。

注意事项：必须确保导出空子句的依赖链确实包含“否定结论”子句，否则可能是前提本身不相容而导致的“平凡证明”。

### 五、运行

在 `Lab1.2` 目录下运行：
```bash
python resolver.py
```
输出会先显示问题一（Howling Hounds），再显示问题二（Attempt）的归结轨迹与最终结论提示。

### 六、可能的改进方向

- 增加“谱系追踪/依赖标记”：记录每个新子句的来源父子句编号，导出空子句时打印整条依赖链，确认是否使用了否定结论子句。
- 更严格地形式化“只被毒贩搜查”的语义（only by），例如：∀y (S(y,x) → DD(y)) 已体现必要条件，但若需要“且仅有毒贩会搜查他”，还可加入对“若某人搜查了他，则此人必为毒贩；不存在非毒贩搜查他”的强化约束。
- 根据课堂版本，若(4)为前提或目标不同，可相应调整结论或前提集合。


